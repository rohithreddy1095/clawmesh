schema_version: "0.1"
core_blocks:
  - block_id: "project_context"
    purpose: "Capture user-provided location/context/goals and existing assets."
    maps_to_farm_twin:
      - "site profile"
      - "infrastructure assets (candidate)"
      - "mission/goals"
    required_fields:
      - "text"
    status: "core"

  - block_id: "site_diagnostics"
    purpose: "Store design-time environmental diagnostics generated by Mr Green."
    maps_to_farm_twin:
      - "site profile climate notes"
      - "soil profile hypotheses"
      - "shade/sun orientation hints"
    required_fields:
      - "rainfall_analysis"
      - "soil_composition"
      - "sun_exposure"
    status: "core"
    validation_rule:
      - "Treat as hypothesis until local measurements/field verification exist."

  - block_id: "critical_questions"
    purpose: "Preserve unresolved design questions to drive next survey/decisions."
    maps_to_farm_twin:
      - "open questions"
      - "field survey tasks"
      - "decision log"
    required_fields:
      - "items[]"
    status: "core"

  - block_id: "initial_site_media"
    purpose: "Track input site photos and visual evidence references used during design."
    maps_to_farm_twin:
      - "evidence"
      - "zone mapping support"
    required_fields:
      - "image_count"
    status: "core"

  - block_id: "strategic_vision_boards"
    purpose: "Capture conceptual design boards as structured planning hypotheses."
    maps_to_farm_twin:
      - "operations library ideas"
      - "asset candidates"
      - "trial ideas"
      - "human goals / experience goals"
    required_fields:
      - "boards[]"
    status: "core"
    caution:
      - "Boards mix useful concepts with aspirational design language; parse into actionable tasks gradually."

  - block_id: "master_plan_gallery"
    purpose: "Track generated masterplan outputs and metadata (styles, timestamps)."
    maps_to_farm_twin:
      - "design artifacts"
      - "planning revisions"
    required_fields:
      - "items[]"
    status: "core"

  - block_id: "design_prompts"
    purpose: "Keep masterplan prompt text for reproducibility and future iterations."
    maps_to_farm_twin:
      - "design provenance"
      - "agent iteration history"
    required_fields:
      - "masterplan_prompt"
    status: "core_optional"

  - block_id: "conversation_context"
    purpose: "Retain relevant chat history snippets/questions that explain design decisions."
    maps_to_farm_twin:
      - "decision rationale"
      - "follow-up questions"
    required_fields:
      - "chat_history_count"
    status: "core_optional"

provenance_policy:
  evidence_label_default: "inference_repo"
  trust_tier_default: "T0_planning_inference"
  actuation_eligibility_default: false
  source_priority:
    - "json_export_state"
    - "html_report"
  merge_strategy:
    - "Prefer JSON for structured fields (analysis, designPlan, questions, styles)."
    - "Prefer HTML for report-specific rendered sections and gallery captions."
